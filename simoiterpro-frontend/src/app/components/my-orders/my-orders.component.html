<div class="container">  
    <span class="text-primary">
        <i class="h4"></i>
        My Orders 
    </span>
    <table class="table table-bordered table-hover table-sm">
        <thead class="bg-primary text-white">
            <tr>
                <th scope="col" class="text-center" style="width:100px;">OrderId</th>                    
                <th scope="col" class="text-center" style="width:100px;">Creation Date</th>                
                <th scope="col" class="text-right" style="width:100px;">Total</th>
                <th scope="col" class="text-center" style="width:100px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="!!myorders && myorders.length == 0">
                <td colspan="4" class="table-light">
                    <div class="text-center"><strong>No orders found</strong></div>
                </td>
            </tr>
            <tr *ngFor="let order of myorders">
                <td class="text-center">{{order.orderId}}</td>
                <td class="text-center">{{order.creationDate | date:'yyyy-MM-dd HH:mm'}}</td>                                
                <td class="text-right">{{order.total | number:'1.2-2'}}</td>
                <td class="text-center">
                    <i class="oi oi-eye text-primary" tooltip="Show Order" (click)="showOrder(showOrderTemplate, order)"></i>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<ng-template #showOrderTemplate>
    <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">MyOrder </h5>
    </div>
    <div class="modal-body">
        <form [formGroup]="orderForm">
            <div class="form-group">
                <label for="name">OrderId</label>
                <input type="text" formControlName="orderId" class="form-control" id="orderId">
            </div> 
            <div class="form-group">
                <label for="name">Creation Date</label>
                <input type="text" formControlName="creationDate" class="form-control" id="creationDate">
            </div>                               
            <div class="form-group">
                <label for="price">Total</label>
                <input type="text" formControlName="total" class="form-control" id="total">
            </div> 
            <div class="form-group">  
                <span class="text-primary">
                    <i class="h4"></i>
                    Order Details
                </span>
                <table class="table table-bordered table-hover table-sm">
                    <thead class="bg-primary text-white">
                        <tr>
                            <th scope="col" class="text-center" style="width:100px;">Product</th>     
                            <th scope="col" class="text-center" style="width:100px;">Price</th>               
                            <th scope="col" class="text-center" style="width:100px;">Quantity</th>                                            
                            <th scope="col" class="text-center" style="width:100px;">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of selectedOrder.items">
                            <td class="text-center">{{item.product.name}}</td>
                            <td class="text-right">{{item.price | number:'1.2-2'}}</td> 
                            <td class="text-center">{{item.quantity}}</td>                                                            
                            <td class="text-right">{{item.price * item.quantity | number:'1.2-2'}}</td>                
                        </tr>
                    </tbody>
                </table>
            </div>                          
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Cancel</button>
            </div>            
        </form>
    </div>
</ng-template>
